@using EInvoice.Web.Controllers.InvoiceController
@model EInvoice.Web.Models.InvoiceViewModel

@{
    ViewBag.Title = "New Invoice";
    Layout = "~/Views/Shared/_mainLayout.cshtml";
}

@{
    var controller = ViewContext.Controller as InvoiceController;
}

<script src="~/Scripts/jquery.min.js"></script>
<style>
    .has-error {
        border-style: solid;
        border-color: #ff0000;
    }

    label span {
        color: #ff0000;
    }
</style>
<div class="">
    <div class="page-title">
        <div class="title_right">
        </div>
    </div>
    <div class="clearfix"></div>
    <h3 style="text-align: center">VAT INVOICE</h3>
    <div class="row">
        <div class="col-md-12 col-sm-12 col-xs-12">
            <div class="x_panel">
                <div class="x_content">
                    <div class="row">
                        <div class="col-md-9 col-sm-9 col-xs-9">
                            <div class="x_panel">
                                <div class="x_title">
                                    <h2>Customer Information</h2>
                                    <div class="clearfix"></div>
                                </div>
                                <div class="x_content">
                                    <br />
                                    <div class="row">
                                        <form class="form-horizontal form-label-left input_mask">
                                            <div class="row">
                                                <div class="col-md-6 col-sm-6 col-xs-12 form-group">
                                                    <label class="control-label col-md-5 col-sm-5 col-xs-12">Customer Code: <span class="required">*</span></label>
                                                    <div class="col-md-7 col-sm-7 col-xs-12">
                                                        <input class="form-control" name="Code" id="CusCode" type="text">
                                                        <input type="hidden" class="form-control" name="ID" id="customerId">
                                                    </div>
                                                </div>

                                                <div class="col-md-6 col-sm-6 col-xs-12 form-group">
                                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Purchaser: </label>
                                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                                        <input class="form-control" name="Purchaser" id="purchaser" type="text">
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-md-6 col-sm-6 col-xs-12 form-group">
                                                    <label class="control-label col-md-5 col-sm-5 col-xs-12">Tax Code: </label>
                                                    <div class="col-md-7 col-sm-7 col-xs-12">
                                                        <input class="form-control" name="TaxCode" id="taxCode" type="text">
                                                    </div>
                                                </div>

                                                <div>
                                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                                        <button type="button" id="find_company" class="btn btn-info ml-3" id="fix-button">Get Info</button>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-md-12 form-group">
                                                    <label class="control-label col-md-2 col-sm-4 col-xs-12" style="width: 20.3%">Enterprise Name:</label>
                                                    <div class="col-md-10 col-sm-8 col-xs-12" style="width: 79.7% !important">
                                                        <input class="form-control" name="Name" id="companyName" type="text">
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-md-12 form-group">
                                                    <label class="control-label col-md-2 col-sm-2 col-xs-3" style="width: 20.3%">Address: <span class="required">*</span></label>
                                                    <div class="col-md-10 col-sm-10 col-xs-9" style="width: 79.7% !important">
                                                        <input class="form-control" name="Address" id="address" type="text">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-6 col-sm-6 col-xs-12 form-group">
                                                    <label class="control-label col-md-5 col-sm-5 col-xs-12">Phone: </label>
                                                    <div class="col-md-7 col-sm-7 col-xs-12">
                                                        <input class="form-control" name="Phone" id="phone" type="text">

                                                    </div>
                                                </div>

                                                <div class="col-md-6 col-sm-6 col-xs-12 form-group">
                                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Email: </label>
                                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                                        <input class="form-control" name="Email" id="email" type="text">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-6 col-sm-6 col-xs-12 form-group">
                                                    <label class="control-label col-md-5 col-sm-5 col-xs-12">Payment Method: <span class="required">*</span></label>
                                                    <div class="col-md-7 col-sm-7 col-xs-12">
                                                        @Html.DropDownListFor(model => model.PaymentTypeID,
                                                        controller.GetPaymentType(),
                                                        new
                                                        {
                                                            @class = "form-control",
                                                            id = "paymentType",
                                                            type = "text",
                                                            name = "PaymentType",

                                                            required = "required"
                                                        })
                                                    </div>
                                                </div>
                                                <div class="col-md-6 col-sm-6 col-xs-12 form-group">
                                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Note: </label>
                                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                                        <textarea class="form-control" id="note" name="Note" type="text"></textarea>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                            </div>
                                            <div class="ln_solid"></div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 col-sm-3 col-xs-3">
                            <div class="x_panel">
                                <div class="x_title">
                                    <h2>Invoice Option</h2>
                                    <div class="clearfix"></div>
                                </div>
                                <div class="x_content">
                                    <br />
                                    <div class="row">
                                        <form class="form-horizontal form-label-left input_mask">
                                            <div class="form-group">
                                                <label class="control-label col-md-4 col-sm-12 col-xs-12">Pattern: <span class="required">*</span></label>
                                                <div class="col-md-8 col-sm-12 col-xs-12">
                                                    <select id="pattern" class="form-control" required>
                                                        <option selected>Select</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label class="control-label col-md-4 col-sm-2 col-xs-12">Serial: <span class="required">*</span></label>
                                                <div class="col-md-8 col-sm-12 col-xs-12">
                                                    <select name="Series" id="series" class="form-control" required>
                                                        <option selected>Select</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label class="control-label col-md-4 col-sm-2 col-xs-12">No: </label>
                                                <div class="col-md-8 col-sm-12 col-xs-12">
                                                    <input type="text" id="no" name="No" class="form-control" placeholder="000000" required value="000000" readonly />
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label class="control-label col-md-4 col-sm-2 col-xs-12">Date: </label>
                                                <div class="col-md-8 col-sm-12 col-xs-12">
                                                    <div class="daterangepicker dropdown-menu ltr single opensright show-calendar picker_4 xdisplay">
                                                        <div class="calendar left single" style="display: block;">
                                                            <div class="daterangepicker_input">
                                                                <input class="input-mini form-control active" type="text" name="daterangepicker_start" value="" style="display: none;"><i class="fa fa-calendar glyphicon glyphicon-calendar" style="display: none;"></i>
                                                                <div class="calendar-time" style="display: none;">
                                                                    <div></div><i class="fa fa-clock-o glyphicon glyphicon-time"></i>
                                                                </div>
                                                            </div>
                                                            <div class="calendar-table">
                                                                <table class="table-condensed">
                                                                    <thead>
                                                                        <tr>
                                                                            <th class="prev available">
                                                                                <i class="fa fa-chevron-left glyphicon glyphicon-chevron-left"></i>
                                                                            </th>
                                                                            <th colspan="5" class="month">Oct 2016</th>
                                                                            <th class="next available">
                                                                                <i class="fa fa-chevron-right glyphicon glyphicon-chevron-right"></i>
                                                                            </th>
                                                                        </tr>
                                                                        <tr>
                                                                            <th>Su</th>
                                                                            <th>Mo</th>
                                                                            <th>Tu</th>
                                                                            <th>We</th>
                                                                            <th>Th</th>
                                                                            <th>Fr</th>
                                                                            <th>Sa</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        <tr>
                                                                            <td class="weekend off available" data-title="r0c0">25</td>
                                                                            <td class="off available" data-title="r0c1">26</td>
                                                                            <td class="off available" data-title="r0c2">27</td>
                                                                            <td class="off available" data-title="r0c3">28</td>
                                                                            <td class="off available" data-title="r0c4">29</td>
                                                                            <td class="off available" data-title="r0c5">30</td>
                                                                            <td class="weekend available" data-title="r0c6">1</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class="weekend available" data-title="r1c0">2</td>
                                                                            <td class="available" data-title="r1c1">3</td>
                                                                            <td class="available" data-title="r1c2">4</td>
                                                                            <td class="available" data-title="r1c3">5</td>
                                                                            <td class="available" data-title="r1c4">6</td>
                                                                            <td class="available" data-title="r1c5">7</td>
                                                                            <td class="weekend available" data-title="r1c6">8</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class="weekend available" data-title="r2c0">9</td>
                                                                            <td class="available" data-title="r2c1">10</td>
                                                                            <td class="available" data-title="r2c2">11</td>
                                                                            <td class="available" data-title="r2c3">12</td>
                                                                            <td class="available" data-title="r2c4">13</td>
                                                                            <td class="available" data-title="r2c5">14</td>
                                                                            <td class="weekend available" data-title="r2c6">15</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class="weekend available" data-title="r3c0">16</td>
                                                                            <td class="available" data-title="r3c1">17</td>
                                                                            <td class="today active start-date active end-date available" data-title="r3c2">18</td>
                                                                            <td class="available" data-title="r3c3">19</td>
                                                                            <td class="available" data-title="r3c4">20</td>
                                                                            <td class="available" data-title="r3c5">21</td>
                                                                            <td class="weekend available" data-title="r3c6">22</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class="weekend available" data-title="r4c0">23</td>
                                                                            <td class="available" data-title="r4c1">24</td>
                                                                            <td class="available" data-title="r4c2">25</td>
                                                                            <td class="available" data-title="r4c3">26</td>
                                                                            <td class="available" data-title="r4c4">27</td>
                                                                            <td class="available" data-title="r4c5">28</td>
                                                                            <td class="weekend available" data-title="r4c6">29</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class="weekend available" data-title="r5c0">30</td>
                                                                            <td class="available" data-title="r5c1">31</td>
                                                                            <td class="off available" data-title="r5c2">1</td>
                                                                            <td class="off available" data-title="r5c3">2</td>
                                                                            <td class="off available" data-title="r5c4">3</td>
                                                                            <td class="off available" data-title="r5c5">4</td>
                                                                            <td class="weekend off available" data-title="r5c6">5</td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        </div>
                                                        <div class="calendar right" style="display: none;">
                                                            <div class="daterangepicker_input">
                                                                <input class="input-mini form-control" type="text" name="daterangepicker_end"
                                                                       value="" style="display: none;"><i class="fa fa-calendar glyphicon glyphicon-calendar" style="display: none;"></i>
                                                                <div class="calendar-time" style="display: none;">
                                                                    <div></div><i class="fa fa-clock-o glyphicon glyphicon-time"></i>
                                                                </div>
                                                            </div>
                                                            <div class="calendar-table">
                                                                <table class="table-condensed">
                                                                    <thead>
                                                                        <tr>
                                                                            <th></th>
                                                                            <th colspan="5" class="month">Nov 2016</th>
                                                                            <th class="next available">
                                                                                <i class="fa fa-chevron-right glyphicon glyphicon-chevron-right"></i>
                                                                            </th>
                                                                        </tr>
                                                                        <tr>
                                                                            <th>Su</th>
                                                                            <th>Mo</th>
                                                                            <th>Tu</th>
                                                                            <th>We</th>
                                                                            <th>Th</th>
                                                                            <th>Fr</th>
                                                                            <th>Sa</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        <tr>
                                                                            <td class="weekend off available" data-title="r0c0">30</td>
                                                                            <td class="off available" data-title="r0c1">31</td>
                                                                            <td class="available" data-title="r0c2">1</td>
                                                                            <td class="available" data-title="r0c3">2</td>
                                                                            <td class="available" data-title="r0c4">3</td>
                                                                            <td class="available" data-title="r0c5">4</td>
                                                                            <td class="weekend available" data-title="r0c6">5</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class="weekend available" data-title="r1c0">6</td>
                                                                            <td class="available" data-title="r1c1">7</td>
                                                                            <td class="available" data-title="r1c2">8</td>
                                                                            <td class="available" data-title="r1c3">9</td>
                                                                            <td class="available" data-title="r1c4">10</td>
                                                                            <td class="available" data-title="r1c5">11</td>
                                                                            <td class="weekend available" data-title="r1c6">12</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class="weekend available" data-title="r2c0">13</td>
                                                                            <td class="available" data-title="r2c1">14</td>
                                                                            <td class="available" data-title="r2c2">15</td>
                                                                            <td class="available" data-title="r2c3">16</td>
                                                                            <td class="available" data-title="r2c4">17</td>
                                                                            <td class="available" data-title="r2c5">18</td>
                                                                            <td class="weekend available" data-title="r2c6">19</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class="weekend available" data-title="r3c0">20</td>
                                                                            <td class="available" data-title="r3c1">21</td>
                                                                            <td class="available" data-title="r3c2">22</td>
                                                                            <td class="available" data-title="r3c3">23</td>
                                                                            <td class="available" data-title="r3c4">24</td>
                                                                            <td class="available" data-title="r3c5">25</td>
                                                                            <td class="weekend available" data-title="r3c6">26</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class="weekend available" data-title="r4c0">27</td>
                                                                            <td class="available" data-title="r4c1">28</td>
                                                                            <td class="available" data-title="r4c2">29</td>
                                                                            <td class="available" data-title="r4c3">30</td>
                                                                            <td class="off available" data-title="r4c4">1</td>
                                                                            <td class="off available" data-title="r4c5">2</td>
                                                                            <td class="weekend off available" data-title="r4c6">3</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class="weekend off available" data-title="r5c0">4</td>
                                                                            <td class="off available" data-title="r5c1">5</td>
                                                                            <td class="off available" data-title="r5c2">6</td>
                                                                            <td class="off available" data-title="r5c3">7</td>
                                                                            <td class="off available" data-title="r5c4">8</td>
                                                                            <td class="off available" data-title="r5c5">9</td>
                                                                            <td class="weekend off available" data-title="r5c6">10</td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        </div>
                                                        <div class="ranges" style="display: none;">
                                                            <div class="range_inputs"><button class="applyBtn btn btn-sm btn-success" type="button">Apply</button> <button class="cancelBtn btn btn-sm btn-default" type="button">Cancel</button></div>
                                                        </div>
                                                    </div>
                                                    <fieldset>
                                                        <div class="control-group">
                                                            <div class="controls">
                                                                <div class="col-md-12 col-sm-12 col-xs-12 xdisplay_inputx form-group has-feedback" style="padding: 0!important">
                                                                    <input type="text" class="form-control has-feedback-left date" id="single_cal4" placeholder="First Name" aria-describedby="inputSuccess2Status4">
                                                                    <span class="fa fa-calendar-o form-control-feedback left" aria-hidden="true"></span>
                                                                    <span id="inputSuccess2Status4" class="sr-only">(success)</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </fieldset>
                                                    @*<div class="input-group">
                                                            <span class="input-group-addon">
                                                                <i class="fa fa-calendar"></i>
                                                            </span>
                                                            <input name="Date" type="text" data-plugin-datepicker class="form-control" id="date">
                                                        </div>*@
                                                </div>
                                            </div>
                                            <div class="ln_solid"></div>
                                        </form>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>

                    <div class="ml-3 mr-3 panel-body">
                        <h5><b>INVOICE DETAILS</b></h5>
                        <hr>
                        <div class="details">
                            <div class="row clearfix">
                                <div class="col-md-12">
                                    <table class=" table table-bordered table-hover" id="tab_logic">
                                        <thead>
                                            <tr>
                                                <th class="text-center"> Series </th>
                                                <th class="text-center"> Code </th>
                                                <th class="text-center" style="width: 40%"> Products - Services </th>
                                                <th class="text-center"> Unit Price </th>
                                                <th class="text-center"> Unit </th>
                                                <th class="text-center"> Quantity </th>
                                                <th class="text-center"> Amount </th>
                                            </tr>
                                        </thead>
                                        <tbody id="goodsTable">
                                            <tr id='addr0'>
                                                <td>1</td>
                                                <td style="display: none"><input id="productId1" name='productId0' class="form-control id" /></td>
                                                <td><input type="text" id="productCode1" name='productCode0' class="form-control name" step="0" min="0" /></td>
                                                <td><input type="text" id="name1" name='name0' class="form-control name" step="0" min="0" /></td>
                                                <td><input type="number" id="price1" name='price0' class="form-control itemPrice " step="0.00" min="0" /></td>
                                                <td><input type="text" id="unit1" name='unit0' class="form-control unit " step="0.00" min="0" /></td>
                                                <td><input type="number" id="qty1" name='qty0' class="form-control qty " step="0" min="0" /></td>
                                                <td><input type="number" id="total1" name='total0' class="form-control total" value="0.00" readonly /></td>
                                            </tr>
                                            <tr id='addr1'></tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="row clearfix">
                                <div class="col-md-12" id="pull-down">
                                    <button id="add_row" class="btn btn-light pull-left border-button">Add Row</button>
                                    <button id='delete_row' class="pull-right btn btn-light border-button">Delete Row</button>
                                </div>
                            </div>
                            @*<div class="row clearfix" style="margin-top: 20px;">
                                <div class="pull-left col-md-8">
                                    <div class="row" style="margin-top: 16.4%">
                                        <div class="text-nowrap col-md-3 pt-1">
                                            <label>Amount in words: </label>
                                        </div>
                                        <div class="col-md-9">
                                            <input class="form-control" tyle="text" style="border: none; background-color: whitesmoke" readonly="readonly">
                                        </div>
                                    </div>
                                </div>*@
                                <div class="pull-right col-md-4">
                                    <table class="table table-bordered table-hover" id="tab_logic_total">
                                        <tbody>
                                            <tr>
                                                <th class="text-center">Sub Total</th>
                                                <td class="text-center"><input type="number" id="sub_total" name='sub_total' placeholder='0.00' class="form-control" id="sub_total" readonly /></td>
                                            </tr>
                                            <tr>
                                                <th class="text-center">Tax</th>
                                                <td class="text-center">
                                                    <div class="input-group mb-2 mb-sm-0">
                                                        <select id="tax" type="number" class="form-control" placeholder="0">
                                                            <option>0</option>
                                                            <option>5</option>
                                                            <option selected>10</option>
                                                        </select>
                                                        <div class="input-group-addon">%</div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <th class="text-center">Tax Amount</th>
                                                <td class="text-center"><input type="number" name='tax_amount' id="tax_amount" placeholder='0.00' class="form-control" readonly /></td>
                                            </tr>
                                            <tr>
                                                <th class="text-center">Grand Total</th>
                                                <td class="text-center"><input type="number" name='total_amount' id="total_amount" placeholder='0.00' class="form-control" readonly /></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="col-md-12" align="right">
                            <button id="submitInvoice" type="submit" class="btn btn-primary">Save</button>
                            <button id="save_and_release" type="submit" class="btn btn-primary">Save & Issue</button>
                            <button type="submit" class="btn btn-outline-secondary">Back</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript" language="javascript">
    var now = new Date();
    var day = ("0" + now.getDate()).slice(-2);
    var month = ("0" + (now.getMonth() + 1)).slice(-2);
    var today = (month) + "/" + (day) + "/" + now.getFullYear();
    document.getElementsByClassName('date').value = today;
</script>