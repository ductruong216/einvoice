@using EInvoice.Web.Controllers.InvoiceController
@model EInvoice.Web.Models.AddInvoiceViewModel

@{
	ViewBag.Title = "Index";
	Layout = "~/Views/Shared/_mainLayout.cshtml";
}
@{
	var paymentTypes = new List<SelectListItem>();
	paymentTypes.Add(new SelectListItem {Text = "Cash", Value = "1", Selected = true});
	paymentTypes.Add(new SelectListItem {Text = "Bank Transfer", Value = "2"});
	paymentTypes.Add(new SelectListItem {Text = "Cash/Bank Transfer", Value = "3"});
}

@{
	var patterns = new List<SelectListItem>();
	patterns.Add(new SelectListItem { Text = "01GTKT0/002", Value = "1", Selected = true });
	patterns.Add(new SelectListItem { Text = "01GTKT0/003", Value = "2" });
}

@{
	var series = new List<SelectListItem>();
	series.Add(new SelectListItem { Text = "GP/17E", Value = "1", Selected = true });
	series.Add(new SelectListItem { Text = "MP/18E", Value = "2" });
}
@{
	var taxes = new List<SelectListItem>();
	taxes.Add(new SelectListItem { Text = "No tax", Value = "0", Selected = true });
	taxes.Add(new SelectListItem { Text = "5", Value = "5" });
	taxes.Add(new SelectListItem { Text = "10", Value = "10" });
}

@{
	var controller = ViewContext.Controller as InvoiceController;
}

<div class="row">
	<h2 style="text-align: center">VAT INVOICE</h2>
	@using (Html.BeginForm("Create", "Invoice", FormMethod.Post))
	{
		<div class="panel-body">
			<div class="panel">
				<div class="ml-3 mr-3">
					<h5><b>INVOICE INFORMATION</b></h5>
					<hr>
					<div class="row mt-3">
						<div class="col-md-9">
							<div class="form-horizontal">
								<section class="panel">
									<header class="panel-heading">
										<h2 class="panel-title">Customer Information</h2>
									</header>
									<div class="panel-body">
										<div class="row col-md-12 form-group">
											<div class="col-md-6">
												<div class="form-group">
													<label class=" control-label col-md-4">Customer Code:</label>
													<div class="col-md-8">
														<div class="input-group input-group-icon">
															<span class="input-group-addon">
																<span class="icon"><i class="fa fa-barcode"></i></span>
															</span>
															@Html.TextBoxFor(model => model.CustomerViewModel.Code,
																new
																{
																	@class="form-control",
																	@id ="CusCode",
																	@type="text",
																	@name="Code"
																})
														</div>
													</div>
												</div>
											</div>
											<div class="col-md-6">
												<div class="form-group">
													<label class=" control-label col-md-4">Purchaser:</label>
													<div class="col-md-8">
														<div class="input-group input-group-icon">
															<span class="input-group-addon">
																<span class="icon"><i class="fa fa-user"></i></span>
															</span>
															@Html.TextBoxFor(model => model.CustomerViewModel.Purchaser,
																new
																{
																	@class="form-control",
																	@id = "purchaser",
																	@type="text",
																	@name= "Purchaser"
																})
															@*<input class="form-control" name="Purchaser" id="purchaser" type="text">*@
														</div>
													</div>
												</div>
											</div>
										</div>
										<div class="row col-md-12 form-group">
											<div class="col-md-6">
												<div class="form-group">
													<label class=" control-label col-md-4">Tax Code:</label>
													<div class="col-md-8">
														<div class="input-group input-group-icon">
															<span class="input-group-addon">
																<span class="icon"><i class="fa fa-qrcode"></i></span>
															</span>
															@Html.TextBoxFor(model => model.CustomerViewModel.TaxCode,
																new
																{
																	@class="form-control",
																	@id = "taxCode",
																	@type="text",
																	@name= "TaxCode"
																})
															@*<input class="form-control" name="TaxCode" id="taxCode" type="text">*@
														</div>
													</div>
												</div>
											</div>
											<div>
												<div class="row">
													<button type="button" id="find_company" class="btn btn-info ml-3" id="fix-button">Get Info</button>
												</div>
											</div>
										</div>
										<div class="row col-md-12 form-group">
											<div class="col-md-12">
												<div class="form-group">
													<label class=" control-label col-md-2">Organization Name:</label>
													<div class="col-md-10">
														<div class="input-group input-group-icon">
															<span class="input-group-addon">
																<span class="icon"><i class="fa fa-briefcase"></i></span>
															</span>
															@Html.TextBoxFor(model => model.CustomerViewModel.Name,
																new
																{
																	@class="form-control",
																	@id = "companyName",
																	@type="text",
																	@name= "Name"
																})
															@*<input class="form-control" name="Name" id="companyName" type="text">*@
														</div>
													</div>
												</div>
											</div>
										</div>
										<div class="row col-md-12 form-group">
											<div class="col-md-12">
												<div class="form-group">
													<label class=" control-label col-md-2">Address:</label>
													<div class="col-md-10">
														<div class="input-group input-group-icon">
															<span class="input-group-addon">
																<span class="icon"><i class="fa fa-address-card"></i></span>
															</span>
															@Html.TextBoxFor(model => model.CustomerViewModel.Address,
																new
																{
																	@class="form-control",
																	@id = "address",
																	@type="text",
																	@name= "Address"
																})
															@*<input class="form-control" name="Address" id="address" type="text">*@
														</div>
													</div>
												</div>
											</div>
										</div>
										<div class="row col-md-12 form-group">
											<div class="col-md-6">
												<div class="form-group">
													<label class=" control-label col-md-4">Email:</label>
													<div class="col-md-8">
														<div class="input-group input-group-icon">
															<span class="input-group-addon">
																<span class="icon"><i class="fa fa-envelope"></i></span>
															</span>
															@Html.TextBoxFor(model => model.CustomerViewModel.Email,
																new
																{
																	@class="form-control",
																	@id = "email",
																	@type="text",
																	@name= "Email"
																})
															@*<input class="form-control" name="Email" id="email" type="text">*@
														</div>
													</div>
												</div>
											</div>
											<div class="col-md-6">
												<div class="form-group">
													<label class=" control-label col-md-4">Phone number:</label>
													<div class="col-md-8">
														<div class="input-group input-group-icon">
															<span class="input-group-addon">
																<span class="icon"><i class="fa fa-phone"></i></span>
															</span>
															@Html.TextBoxFor(model => model.CustomerViewModel.Phone,
																new
																{
																	@class="form-control",
																	@id = "phone",
																	@type="text",
																	@name= "Phone"
																})
															@*<input class="form-control" name="Phone" id="phone" type="text">*@
														</div>
													</div>
												</div>
											</div>
										</div>
										<div class="row col-md-12 form-group">
											<div class="col-md-6">
												<div class="form-group">
													<label class=" control-label col-md-4">Payment Type:<span class="required">*</span></label>
													<div class="col-sm-8">
														<div class="input-group input-group-icon">
															<span class="input-group-addon">
																<span class="icon"><i class="fa fa-usd"></i></span>
															</span>

															@Html.DropDownListFor(model => model.InvoiceViewModel.PaymentTypeID,
																paymentTypes,
																new
																{
																	@class = "form-control",
																	@id = "paymentType",
																	@type = "text",
																	@name = "PaymentType",
																	@style = "padding-left: 9%",
																	@required = "required"
																})
															@*<select style="padding-left: 9%" id="paymentType" class="form-control" name="PaymentType" type="text">
																	<option selected>Choose...</option>
																	@foreach (var item in controller.GetPayments())
																	{
																		<option>@item.Name</option>
																	}
																</select>*@
														</div>
													</div>
												</div>
											</div>
											<div class="col-md-6">
												<div class="row">
													<label class=" control-label col-md-4">Note:</label>
													<div class="col-md-8">
														<div class="input-group input-group-icon">
															<span class="input-group-addon">
																<span class="icon"><i class="fa fa-sticky-note"></i></span>
															</span>
															@Html.TextAreaFor(model => model.InvoiceViewModel.Note,
																new
																{
																	@class = "form-control",
																	@id = "note",
																	@type = "text",
																	@name = "Note",
																	@style = "padding-left: 9%"
																})
															@*<textarea style="padding-left: 9%" class="form-control" id="note" name="Note" type="text"></textarea>*@
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</section>
							</div>
						</div>
						<div class="col-md-3">
							<div class="form-horizontal">
								<section class="panel">
									<header class="panel-heading">
										<h2 class="panel-title">Invoice Option</h2>
									</header>
									<div class="panel-body">
										<div class="form-group">
											<label class="col-sm-3 control-label">Pattern: <span class="required">*</span></label>
											<div class="col-md-9">
												@Html.DropDownListFor(model => model.InvoiceViewModel.PaternId,
													patterns,
													new
													{
														@class = "form-control",
														@id = "pattern",
														@type = "text",
														@name = "Pattern",
														@style = "padding-left: 9%",
														@required = "required"
													})
												@*<select name="Pattern" id="pattern" class="form-control  col-md-9" required>
														<option selected>01GTKT0/003</option>
														<option>01GTKT0/002</option>
													</select>*@
											</div>
										</div>
										<div class="form-group">
											<label class="col-sm-3 control-label">Series: <span class="required">*</span></label>
											<div class="col-md-9">
												@Html.DropDownListFor(model => model.InvoiceViewModel.Series,
													series,
													new
													{
														@class = "form-control col-md-9",
														@id = "series",
														@type = "text",
														@name = "Series",
														@required = "required"
													})
												@*<select name="Series" id="series" class="form-control  col-md-9" required>
														<option selected>Choose...</option>
														<option>GP/17E</option>
														<option>MP/18E</option>
													</select>*@
											</div>
										</div>

										<div class="form-group">
											<label class="col-sm-3 control-label">No: <span class="required">*</span></label>
											<div class="col-md-9">
												<input type="text" id="no" name="No" class="form-control" placeholder="000000" required value="000000" readonly />
											</div>
										</div>

										<div class="form-group">
											<label class="col-sm-3 control-label">Date: <span class="required">*</span></label>
											<div class="col-md-9">
												<div class="input-group">
													<span class="input-group-addon">
														<i class="fa fa-calendar"></i>
													</span>
													@Html.TextBoxFor(model => model.CustomerViewModel.Phone,
														new
														{
															@class="form-control",
															@id = "date",
															@type="text",
															@name= "Date",
															data_plugin_datepicker = "data-plugin-datepicker"
														})
													@*<input name="Date" type="text" data-plugin-datepicker class="form-control" id="date">*@
												</div>
											</div>
										</div>
									</div>
								</section>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="ml-3 mr-3 panel-body">
			<h5><b>INVOICE DETAILS</b></h5>
			<hr>
			<div class="details">
				<div class="row clearfix">
					<div class="col-md-12">
						<table class="table table-bordered table-hover" id="tab_logic">
							<thead>
								<tr>
									<th class="text-center"> Series </th>
									<th class="text-center" style="display: none"> Code </th>
									<th class="text-center" style="width: 40%"> Products - Services </th>
									<th class="text-center"> Unit Price </th>
									<th class="text-center"> Unit </th>
									<th class="text-center"> Quantity </th>
									<th class="text-center"> Amount </th>
								</tr>
							</thead>
							<tbody id="goodsTable">
								<tr id='addr0'>
									<td>1</td>
									<td style="display: none">
										@Html.TextBoxFor(model => model.ProductViewModel.Code,
											new
											{
												@class="form-control",
												@id = "productCode1",
												@type="text",
												@name= "productCode0",

											})
										@*<input id="productCode1" name='productCode0' class="form-control name" id="description" step="0" min="0" />*@
									</td>
									<td>
										@Html.TextBoxFor(model => model.ProductViewModel.Name,
											new
											{
												@class="form-control name",
												@id = "name1",
												@type="text",
												@name= "name0",
												@step = "0",
												@min = "0"
											})
										@*<input type="text" id="name1" name='name0' class="form-control name" id="description" step="0" min="0" />*@
									</td>
									<td>
										@Html.TextBoxFor(model => model.ProductViewModel.Price,
											new
											{
												@class= "form-control price",
												@id = "price1",
												@type= "number",
												@name= "price0",
												@step = "0",
												@min = "0"
											})
										@*<input type="number" id="price1" name='price0' class="form-control price" step="0.00" min="0" />*@
									</td>
									<td>
										@Html.TextBoxFor(model => model.ProductViewModel.Unit,
											new
											{
												@class= "form-control unit",
												@id = "unit1",
												@type= "text",
												@name= "unit0",
											})
										@*<input type="text" id="unit1" name='unit0' class="form-control unit" step="0.00" min="0" />*@
									</td>
									<td>
										@Html.TextBoxFor(model => model.ItemViewModel.Quantity,
											new
											{
												@class= "form-control qty",
												@id = "qty1",
												@type= "number",
												@name= "qty0",
												@step = "0",
												@min = "0"
											})
										@*<input type="number" id="qty1" name='qty0' class="form-control qty" step="0" min="0" />*@
									</td>
									<td>
										@Html.TextBoxFor(model => model.ItemViewModel.TotalAmount,
											new
											{
												@class= "form-control total",
												@id = "total1",
												@type= "number",
												@name= "total0",
												@step = "0",
												@min = "0"
											})
										@*<input type="number" id="total1" name='total0' class="form-control total" readonly />*@
									</td>
								</tr>
								<tr id='addr1'></tr>
							</tbody>
						</table>
					</div>
				</div>
				<div class="row clearfix">
					<div class="col-md-12" id="pull-down">
						<button id="add_row" class="btn btn-light pull-left border-button">Add Row</button>
						<button id='delete_row' class="pull-right btn btn-light border-button">Delete Row</button>
					</div>
				</div>
				<div class="row clearfix" style="margin-top: 20px;">
					<div class="pull-left col-md-8">
						<div class="row" style="margin-top: 16.4%">
							<div class="text-nowrap col-md-3 pt-1">
								<label>Amount in words: </label>
							</div>
							<div class="col-md-9">
								@Html.TextBoxFor(model => model.InvoiceViewModel.InWord,
									new
									{
										@class= "form-control",
										@type = "text",
										@name= "total0",
										@style="border: none; background-color: whitesmoke"
									})
								@*<input class="form-control" tyle="text" style="border: none; background-color: whitesmoke">*@
							</div>
						</div>
					</div>
					<div class="pull-right col-md-4">
						<table class="table table-bordered table-hover" id="tab_logic_total">
							<tbody>
								<tr>
									<th class="text-center">Sub Total</th>
									<td class="text-center">
										@Html.TextBoxFor(model => model.ItemViewModel.Quantity,
											new
											{
												@class= "form-control",
												@id = "sub_total",
												@type= "number",
												@name= "sub_total",
												@placeholder="0",
												@readonly="readonly"
											})
										@*<input type="number" id="sub_total" name='sub_total' placeholder='0.00' class="form-control" id="sub_total" readonly />*@
									</td>
								</tr>
								<tr>
									<th class="text-center">Tax</th>
									<td class="text-center">
										<div class="input-group mb-2 mb-sm-0">
											@Html.DropDownListFor(model => model.InvoiceViewModel.Tax,
												taxes,
												new
												{
													@class = "form-control",
													@id = "tax",
													@type = "number",
													@placeholder="0"
												})
											@*<select id="tax" type="number" class="form-control" placeholder="0">
												<option selected>0</option>
												<option>5</option>
												<option>10</option>
											</select>*@
											<div class="input-group-addon">%</div>
										</div>
									</td>
								</tr>
								<tr>
									<th class="text-center">Tax Amount</th>
									<td class="text-center">
										@Html.TextBoxFor(model => model.InvoiceViewModel.TaxAmount,
											new
											{
												@class= "form-control",
												@id = "tax_amount",
												@type= "number",
												@name= "tax_amount",
												@placeholder="0",
												@readonly="readonly"
											})

										@*<input type="number" name='tax_amount' id="tax_amount" placeholder='0.00' class="form-control" readonly/>*@
									</td>
								</tr>
								<tr>
									<th class="text-center">Grand Total</th>
									<td class="text-center">
										@Html.TextBoxFor(model => model.InvoiceViewModel.GrandTotalAmount,
											new
											{
												@class= "form-control",
												@id = "total_amount",
												@type= "number",
												@name= "total_amount",
												@placeholder="0",
												@readonly="readonly"
											})

										@*<input type="number" name='total_amount' id="total_amount" placeholder='0.00' class="form-control" readonly/>*@
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
		<footer class="panel-footer">
			<div class="row">
				<div class="col-sm-3 button-position">
					<button id="submitInvoice" type="submit" class="btn btn-primary">Save</button>
					<button type="submit" class="btn btn-primary">Save & Release</button>
					<button type="submit" class="btn btn-outline-secondary">Back</button>
				</div>
			</div>
		</footer>
	}
</div>

<script type="text/javascript" language="javascript">
	var now = new Date();
	var day = ("0" + now.getDate()).slice(-2);
	var month = ("0" + (now.getMonth() + 1)).slice(-2);
	var today = (month) + "/" + (day) + "/" + now.getFullYear();
	document.getElementById('date').value = today;


	
</script>

<script src="~/Assets/vendor/jquery-3.2.1.min.js"></script>